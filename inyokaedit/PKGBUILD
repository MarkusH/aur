# Maintainer: Markus Holtermann <aur@markusholtermann.eu>
pkgname=inyokaedit
pkgver=0.2.0
pkgrel=2
pkgdesc='A small markup editor for Inyoka articles (http://ubuntuusers.de/inyoka/). It includes syntax highlighting, offline preview, downloading raw text of existing articles...'
arch=('i686' 'x86_64')
url='https://launchpad.net/inyokaedit/'
license=('GPL3')
depends=('hunspell' 'qtwebkit')
makedepends=('bzr' 'gcc')
source=('Makefile.patch')
md5sums=('3b8c818eab61fa764ac7fb26ce30642e')

_bzr_url="http://bazaar.launchpad.net/~elthoro/inyokaedit/$pkgver"

build() {
    bzr export $pkgname-$pkgver $_bzr_url
    cp Makefile.patch "$srcdir/$pkgname-$pkgver"
    cd "$srcdir/$pkgname-$pkgver"
    qmake
    patch -p0 < Makefile.patch
    make
}

package() {
    cd "$srcdir/$pkgname-$pkgver"
    install -d $pkgdir/usr/share/$pkgname $pkgdir/usr/bin $pkgdir/usr/share/man/de/man1
    cp -rf images/interwiki $pkgdir/usr/share/$pkgname/iWikiLinks
    cp -rf images $pkgdir/usr/share/$pkgname/
    cp -rf lang $pkgdir/usr/share/$pkgname/
    cp man/de/man1/inyokaedit.1.gz $pkgdir/usr/share/man/de/man1/
    cp GetInyokaStyles $pkgdir/usr/share/$pkgname/
    cp inyokaedit $pkgdir/usr/bin/inyokaedit
}
